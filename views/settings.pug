extends layout

block content
  - var title = 'Settings'
  div.d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
    h1.h2 Bot Settings
    div.btn-toolbar.mb-2.mb-md-0

  form#settings-form(action="/settings", method="post")
    div.row.mb-4
      div.col-md-12
        div.card
          div.card-header.bg-primary.text-white
            h5.mb-0 Twitch Credentials
          div.card-body
            div.row
              div.col-md-4.mb-3
                label.form-label(for="BOT_USERNAME") Bot Username
                input.form-control#BOT_USERNAME(type="text", name="BOT_USERNAME", value=envVars.BOT_USERNAME || '')
                small.form-text.text-muted The Twitch username of your bot account
              div.col-md-4.mb-3
                label.form-label(for="OAUTH_TOKEN") OAuth Token
                input.form-control#OAUTH_TOKEN(type="password", name="OAUTH_TOKEN", value=envVars.OAUTH_TOKEN || '')
                small.form-text.text-muted
                  | Get your token from 
                  a(href="https://twitchapps.com/tmi/", target="_blank") twitchapps.com/tmi
              div.col-md-4.mb-3
                label.form-label(for="CHANNEL") Channel Name
                input.form-control#CHANNEL(type="text", name="CHANNEL", value=envVars.CHANNEL || '')
                small.form-text.text-muted The Twitch channel to join (without the @ symbol)

    div.row.mb-4
      div.col-md-12
        div.card
          div.card-header.bg-primary.text-white
            h5.mb-0 Discord Credentials
          div.card-body
            div.row
              div.col-md-6.mb-3
                label.form-label(for="DISCORD_TOKEN") Discord Bot Token
                input.form-control#DISCORD_TOKEN(type="password", name="DISCORD_TOKEN", value=envVars.DISCORD_TOKEN || '')
                small.form-text.text-muted
                  | Create a bot at 
                  a(href="https://discord.com/developers/applications", target="_blank") discord.com/developers
              div.col-md-6.mb-3
                label.form-label(for="DISCORD_CLIENT_ID") Discord Client ID
                input.form-control#DISCORD_CLIENT_ID(type="text", name="DISCORD_CLIENT_ID", value=envVars.DISCORD_CLIENT_ID || '')
                small.form-text.text-muted The client ID of your Discord application
            div.row
              div.col-md-4.mb-3
                label.form-label(for="DISCORD_GUILD_ID") Discord Server ID
                input.form-control#DISCORD_GUILD_ID(type="text", name="DISCORD_GUILD_ID", value=envVars.DISCORD_GUILD_ID || '')
                small.form-text.text-muted The ID of your Discord server
              div.col-md-4.mb-3
                label.form-label(for="DISCORD_LIVE_CHANNEL_ID") Live Announcements Channel ID
                input.form-control#DISCORD_LIVE_CHANNEL_ID(type="text", name="DISCORD_LIVE_CHANNEL_ID", value=envVars.DISCORD_LIVE_CHANNEL_ID || '')
                small.form-text.text-muted Channel for stream notifications
              div.col-md-4.mb-3
                label.form-label(for="DISCORD_CLIPS_CHANNEL_ID") Clips Channel ID
                input.form-control#DISCORD_CLIPS_CHANNEL_ID(type="text", name="DISCORD_CLIPS_CHANNEL_ID", value=envVars.DISCORD_CLIPS_CHANNEL_ID || '')
                small.form-text.text-muted Channel for clip notifications

    div.row.mb-4
      div.col-md-12
        div.card
          div.card-header.bg-primary.text-white
            h5.mb-0 Twitch API Credentials
          div.card-body
            div.row
              div.col-md-4.mb-3
                label.form-label(for="TWITCH_CLIENT_ID") Twitch Client ID
                input.form-control#TWITCH_CLIENT_ID(type="text", name="TWITCH_CLIENT_ID", value=envVars.TWITCH_CLIENT_ID || '')
                small.form-text.text-muted
                  | Register an app at 
                  a(href="https://dev.twitch.tv/console/apps", target="_blank") dev.twitch.tv
              div.col-md-4.mb-3
                label.form-label(for="TWITCH_CLIENT_SECRET") Twitch Client Secret
                input.form-control#TWITCH_CLIENT_SECRET(type="password", name="TWITCH_CLIENT_SECRET", value=envVars.TWITCH_CLIENT_SECRET || '')
                small.form-text.text-muted The client secret of your Twitch application
              div.col-md-4.mb-3
                label.form-label(for="TWITCH_BROADCASTER_ID") Broadcaster ID
                input.form-control#TWITCH_BROADCASTER_ID(type="text", name="TWITCH_BROADCASTER_ID", value=envVars.TWITCH_BROADCASTER_ID || '')
                small.form-text.text-muted The Twitch user ID of the broadcaster

    div.d-grid.gap-2.d-md-flex.justify-content-md-end
      button.btn.btn-primary(type="submit")
        i.bi.bi-save.me-1
        | Save Settings

  div.mt-4
    div.alert.alert-info
      h5 How to get your credentials
      ul
        li
          strong Twitch OAuth Token:
          |  Visit 
          a(href="https://twitchapps.com/tmi/", target="_blank") twitchapps.com/tmi
          |  and log in with your bot account.
        li
          strong Discord Bot:
          |  Create a bot at 
          a(href="https://discord.com/developers/applications", target="_blank") discord.com/developers/applications
          | , then add it to your server.
        li
          strong Twitch API:
          |  Register an application at 
          a(href="https://dev.twitch.tv/console/apps", target="_blank") dev.twitch.tv/console/apps
          | .
        li
          strong Discord Channel IDs:
          |  Enable Developer Mode in Discord (Settings > Advanced), then right-click on a channel and select "Copy ID".
        li
          strong Twitch Broadcaster ID:
          |  Use a tool like 
          a(href="https://www.streamweasels.com/tools/convert-twitch-username-to-user-id/", target="_blank") streamweasels.com
          |  to convert a Twitch username to ID.
