extends layout

block content
  - var title = 'Change Password'
  div.d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
    h1.h2 Change Password
    div.btn-toolbar.mb-2.mb-md-0

  div.row.justify-content-center
    div.col-md-6
      div.card.mb-4
        div.card-header.bg-primary.text-white
          h5.mb-0 Change Your Password
        div.card-body
          form(action="/change-password", method="post")
            div.mb-3
              label.form-label(for="currentPassword") Current Password
              input.form-control#currentPassword(type="password", name="currentPassword", required)
            
            div.mb-3
              label.form-label(for="newPassword") New Password
              input.form-control#newPassword(type="password", name="newPassword", required)
              div.mt-2
                label.form-label.small Password Strength:
                div.progress
                  div#password-strength.progress-bar(role="progressbar", style="width: 0%", aria-valuenow="0", aria-valuemin="0", aria-valuemax="100")
                small.form-text.text-muted Use a strong password with at least 8 characters, including uppercase, lowercase, numbers, and special characters.
            
            div.mb-3
              label.form-label(for="confirmPassword") Confirm New Password
              input.form-control#confirmPassword(type="password", name="confirmPassword", required)
            
            div.d-grid.gap-2
              button.btn.btn-primary(type="submit")
                i.bi.bi-key.me-1
                | Change Password
        
        if message
          div.card-footer
            div.alert.alert-info.mb-0= message

block scripts
  script.
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('form');
      const newPassword = document.getElementById('newPassword');
      const confirmPassword = document.getElementById('confirmPassword');
      
      form.addEventListener('submit', function(event) {
        if (newPassword.value !== confirmPassword.value) {
          event.preventDefault();
          alert('New passwords do not match!');
        }
      });
    });
